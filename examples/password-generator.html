<!-- capabilities: ["ui:window"] -->
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
  body { margin: 0; padding: 20px; background: #1a1a2e; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; }
  h2 { font-size: 18px; color: #6c63ff; margin-bottom: 16px; }
  .output { background: #0d0d1a; border: 1px solid #2a2a4a; border-radius: 8px; padding: 16px; font-family: 'Cascadia Code', monospace; font-size: 20px; letter-spacing: 2px; text-align: center; margin-bottom: 16px; word-break: break-all; min-height: 32px; cursor: pointer; user-select: all; }
  .output:hover { border-color: #6c63ff; }
  .controls { display: flex; flex-direction: column; gap: 14px; margin-bottom: 20px; }
  .row { display: flex; align-items: center; justify-content: space-between; }
  .row label { font-size: 13px; color: #8888aa; }
  .row input[type="range"] { width: 140px; accent-color: #6c63ff; }
  .row input[type="checkbox"] { accent-color: #6c63ff; }
  .row span { font-family: monospace; font-size: 13px; min-width: 24px; text-align: right; }
  button { width: 100%; background: #6c63ff; border: none; border-radius: 8px; padding: 12px; color: white; font-size: 14px; cursor: pointer; }
  button:hover { background: #7b73ff; }
  .strength { font-size: 12px; text-align: center; margin-top: 8px; }
  .strength.weak { color: #ff4757; }
  .strength.medium { color: #ffa502; }
  .strength.strong { color: #2ed573; }
</style>
</head>
<body>
<h2>Password Generator</h2>
<div class="output" id="output" title="Click to select">â€”</div>
<div class="strength" id="strength"></div>
<div class="controls">
  <div class="row">
    <label>Length</label>
    <input type="range" id="length" min="8" max="64" value="20">
    <span id="length-val">20</span>
  </div>
  <div class="row"><label>Uppercase (A-Z)</label><input type="checkbox" id="upper" checked></div>
  <div class="row"><label>Lowercase (a-z)</label><input type="checkbox" id="lower" checked></div>
  <div class="row"><label>Numbers (0-9)</label><input type="checkbox" id="numbers" checked></div>
  <div class="row"><label>Symbols (!@#$...)</label><input type="checkbox" id="symbols" checked></div>
</div>
<button id="generate">Generate Password</button>
<script>
  const chars = {
    upper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
    lower: 'abcdefghijklmnopqrstuvwxyz',
    numbers: '0123456789',
    symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?',
  };

  function generate() {
    const len = parseInt(document.getElementById('length').value);
    let pool = '';
    if (document.getElementById('upper').checked) pool += chars.upper;
    if (document.getElementById('lower').checked) pool += chars.lower;
    if (document.getElementById('numbers').checked) pool += chars.numbers;
    if (document.getElementById('symbols').checked) pool += chars.symbols;

    if (!pool) { pool = chars.lower; }

    const arr = new Uint32Array(len);
    crypto.getRandomValues(arr);
    let password = '';
    for (let i = 0; i < len; i++) {
      password += pool[arr[i] % pool.length];
    }

    document.getElementById('output').textContent = password;

    // Strength estimate
    const entropy = Math.log2(pool.length) * len;
    const el = document.getElementById('strength');
    if (entropy < 40) { el.textContent = `Weak (${Math.round(entropy)} bits)`; el.className = 'strength weak'; }
    else if (entropy < 80) { el.textContent = `Medium (${Math.round(entropy)} bits)`; el.className = 'strength medium'; }
    else { el.textContent = `Strong (${Math.round(entropy)} bits)`; el.className = 'strength strong'; }
  }

  document.getElementById('generate').onclick = generate;
  document.getElementById('length').oninput = (e) => {
    document.getElementById('length-val').textContent = e.target.value;
  };

  generate();
</script>
</body>
</html>
